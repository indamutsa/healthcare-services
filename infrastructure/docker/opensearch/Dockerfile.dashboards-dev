FROM opensearchproject/opensearch-dashboards:2.14.0

# Remove unnecessary dashboard plugins for development
RUN rm -rf \
    plugins/securityDashboards \
    plugins/observabilityDashboards \
    plugins/alertingDashboards \
    plugins/reportsDashboards

# Keep essential plugins: Dev Tools, Visualizations, Discover
# These remain in the image by default

# Set environment variables for development
ENV OPENSEARCH_HOSTS=http://opensearch:9200
ENV DISABLE_SECURITY_DASHBOARDS_PLUGIN=true

# Expose port
EXPOSE 5601

# Use the standard entrypoint
ENTRYPOINT ["/usr/share/opensearch-dashboards/bin/opensearch-dashboards"]
CMD ["--no-warnings"]