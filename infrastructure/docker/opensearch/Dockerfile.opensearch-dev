FROM opensearchproject/opensearch:2.14.0

# Remove unnecessary plugins for development
RUN rm -rf \
    plugins/opensearch-security \
    plugins/opensearch-alerting \
    plugins/opensearch-anomaly-detection \
    plugins/opensearch-observability \
    plugins/opensearch-reports-scheduler \
    plugins/opensearch-performance-analyzer

# Keep essential plugins: SQL, Index Management, Dev Tools
# These remain in the image by default

# Set environment variables for development
ENV discovery.type=single-node
ENV OPENSEARCH_JAVA_OPTS="-Xms256m -Xmx512m"

# Expose ports
EXPOSE 9200 9600

# Use the standard entrypoint
ENTRYPOINT ["./opensearch-docker-entrypoint.sh"]